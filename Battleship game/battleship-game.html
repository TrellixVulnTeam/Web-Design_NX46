<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>

	class Igrac {
		constructor(ime) {
		    this.ime = ime;
		    this.matrica = new Array(10);
		    this.inicijalizujMatricu();
		    this.potezi = [];

		    this.brodCetiri=1;
		    this.brodTri=2;
		    this.brodDva=3;
		    this.brodJedan=4;
		}
		getName() {
		  	console.log(this.ime);
		    return this.name;
		}
		inicijalizujMatricu(){
		  	for (var i = 0; i < this.matrica.length; i++) {
			  	this.matrica[i] = new Array(10);
			  	for (var j = 0; j < this.matrica.length; j++) {
			  		this.matrica[i][j] = 0;
				}
			}
		}
		ponistiPolja(brojPolja){
		  	for (var i = 0; i < brojPolja; i++) {
			  	var potez = this.potezi.pop();
				this.matrica[potez.iDeo][potez.jDeo]=0;
				$("#"+potez.iDeo+potez.jDeo).css("background-color", "white");
				console.log("Ponisten potez: x=" + potez.jDeo + " y=" + potez.iDeo);
			}
		}

	}

var misPritisnut = 0;

var brojacPolja=0;

var igrac1 = new Igrac("Ivan");
console.log(igrac1.matrica);

var trenutniIgrac = igrac1;

$(document).ready(function(){

	$("*").mousedown(function(event) {
		console.log("Usao *");
		misPritisnut=1;
		brojacPolja=0;
		//console.log("mouse down " + misPritisnut);
	});

	$("*").mouseup(function(event) {
		misPritisnut = 0;
		console.log("IZABRANO POLJA: " + brojacPolja);
		if(brojacPolja>4){
			trenutniIgrac.ponistiPolja(brojacPolja);
			event.stopPropagation();
		} 
	});


	$("td").mouseenter(function(){
		if(misPritisnut==1){
			$(this).css("background-color", "yellow");

			var i=parseInt($(this).attr('id')[0]);
			var j=parseInt($(this).attr('id')[1]);
			console.log("i=" + i + " j=" + j);
			if(trenutniIgrac.matrica[i][j]==1) return;
			trenutniIgrac.matrica[i][j]=1;
			trenutniIgrac.potezi.push({iDeo: i, jDeo:j});
			brojacPolja++;

		}
	});

	$("td").mousedown(function(event){
		console.log("Usao td");
	  	$(this).css("background-color", "yellow");

		var i=parseInt($(this).attr('id')[0]);
		var j=parseInt($(this).attr('id')[1]);
		console.log("i=" + i + " j=" + j);
		if(trenutniIgrac.matrica[i][j]==1) return;
		trenutniIgrac.matrica[i][j]=1;
		trenutniIgrac.potezi.push({iDeo: i, jDeo:j});
		brojacPolja++;
		event.stopPropagation();

	});

	$("#ispisMatrica").click(function() {
		for (var i = 0; i < trenutniIgrac.matrica.length; i++) {
	  		console.log(trenutniIgrac.matrica[i]);
		}
	});

	$("#clearConsole").click(function() {
		console.clear();
	});

	$("#ispisPoteza").click(function() {
		console.log(trenutniIgrac.potezi);
	});

	$("#vratiPotez").click(function() {
		if(trenutniIgrac.potezi.length!=0){
			var potez = trenutniIgrac.potezi.pop();
			trenutniIgrac.matrica[potez.iDeo][potez.jDeo]=0;
			$("#"+potez.iDeo+potez.jDeo).css("background-color", "white");
			console.log(potez);
		}
	});


});

</script>
</head>
<body>

<button id="ispisMatrica">ISPISI MATRICU</button>
<button id="clearConsole">OCISTI CONSOLU</button>
<button id="ispisPoteza">ISPISI POTEZE</button>
<button id="vratiPotez">VRATI POTEZ</button>

<p>This is a paragraph with little content.</p>
<p>This is another small paragraph.</p>

<table border="1px;"style="width:100%; height: 80vh;">
	<tr>
		<td id="00"></td>
		<td id="01"></td>
		<td id="02"></td>
		<td id="03"></td>
		<td id="04"></td>
		<td id="05"></td>
		<td id="06"></td>
		<td id="07"></td>
		<td id="08"></td>
		<td id="09"></td>
	</tr>
	<tr>
		<td id="10"></td>
		<td id="11"></td>
		<td id="12"></td>
		<td id="13"></td>
		<td id="14"></td>
		<td id="15"></td>
		<td id="16"></td>
		<td id="17"></td>
		<td id="18"></td>
		<td id="19"></td>
	</tr>
	<tr>
		<td id="20"></td>
		<td id="21"></td>
		<td id="22"></td>
		<td id="23"></td>
		<td id="24"></td>
		<td id="25"></td>
		<td id="26"></td>
		<td id="27"></td>
		<td id="28"></td>
		<td id="29"></td>
	</tr>
	<tr>
		<td id="30"></td>
		<td id="31"></td>
		<td id="32"></td>
		<td id="33"></td>
		<td id="34"></td>
		<td id="35"></td>
		<td id="36"></td>
		<td id="37"></td>
		<td id="38"></td>
		<td id="39"></td>
	</tr>
	<tr>
		<td id="40"></td>
		<td id="41"></td>
		<td id="42"></td>
		<td id="43"></td>
		<td id="44"></td>
		<td id="45"></td>
		<td id="46"></td>
		<td id="47"></td>
		<td id="48"></td>
		<td id="49"></td>
	</tr>
	<tr>
		<td id="50"></td>
		<td id="51"></td>
		<td id="52"></td>
		<td id="53"></td>
		<td id="54"></td>
		<td id="55"></td>
		<td id="56"></td>
		<td id="57"></td>
		<td id="58"></td>
		<td id="59"></td>
	</tr>
	<tr>
		<td id="60"></td>
		<td id="61"></td>
		<td id="62"></td>
		<td id="63"></td>
		<td id="64"></td>
		<td id="65"></td>
		<td id="66"></td>
		<td id="67"></td>
		<td id="68"></td>
		<td id="69"></td>
	</tr>
	<tr>
		<td id="70"></td>
		<td id="71"></td>
		<td id="72"></td>
		<td id="73"></td>
		<td id="74"></td>
		<td id="75"></td>
		<td id="76"></td>
		<td id="77"></td>
		<td id="78"></td>
		<td id="79"></td>
	</tr>
	<tr>
		<td id="80"></td>
		<td id="81"></td>
		<td id="82"></td>
		<td id="83"></td>
		<td id="84"></td>
		<td id="85"></td>
		<td id="86"></td>
		<td id="87"></td>
		<td id="88"></td>
		<td id="89"></td>
	</tr>
	<tr>
		<td id="90"></td>
		<td id="91"></td>
		<td id="92"></td>
		<td id="93"></td>
		<td id="94"></td>
		<td id="95"></td>
		<td id="96"></td>
		<td id="97"></td>
		<td id="98"></td>
		<td id="99"></td>
	</tr>
</table>

</body>
</html>